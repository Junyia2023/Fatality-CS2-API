## animated_texture

此类型是动画纹理。此纹理类型仅支持 **动画 GIF** 类型，不支持 **APNG**。

> 此类型继承自 [`texture`](/api/draw/managed/texture "此类型表示一个纹理对象。") 类型。其所有基类方法和字段在此类型中同样可用。

> 如果传递了不支持的类型，它将 **完全** 像 [`texture`](/api/draw/managed/texture "此类型表示一个纹理对象。") 类型一样工作，这意味着控制帧和循环将毫无意义。

> 使用此类型作为纹理图集是可能的，但非常不推荐。这将在内存中生成额外的纹理对象，并且整体性能会更慢。建议构建实际的纹理图集，使用 [`texture`](/api/draw/managed/texture "此类型表示一个纹理对象。") 类型，并使用纹理映射。

## __call

[![Constructor][这是此类型的构造函数定义。]rw]

构造动画纹理。

> 传递无效指针或内存区域小于所需大小将导致 **崩溃**。

**参数**

*1. 从文件加载：*

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `path` | `string` | 纹理文件的路径。 |

*2. 从内存加载：*

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `data` | [`ptr`](/api/common-types/ptr "此类型是一个指针。") | 指向内存中纹理 **文件** 数据的指针。 |
| `sz` | `int` | 纹理 **文件** 数据的大小。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `animated_texture` | 动画纹理实例。 |

**示例**

```lua
local gif = draw.animated_texture('funny_gif.gif');
```

## should_loop

[![Field][这是一个普通字段，必须使用点 (.) 访问。]rw]

**类型:** `bool`

如果设置为 `false`，则不会自动循环动画。默认为 `true`。

## reset_loop

[![Method][此字段是方法，必须使用冒号 (:) 调用。]rw]

重置循环以从第一帧开始播放。

**参数**

无。

**返回值**

无。

**示例**

```lua
gif:reset_loop();
```

## set_frame

[![Method][此字段是方法，必须使用冒号 (:) 调用。]rw]

设置动画中的特定帧。如果启用了循环，则从传递的帧继续循环。否则，将显示动画中的特定帧。

> 帧计数从 `0` 开始。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `frame` | `int` | 帧编号。无效的帧编号将被限制在有效范围内。 |

**返回值**

无。

**示例**

```lua
gif:set_frame(5);
```

## get_frame_count

[![Method][此字段是方法，必须使用冒号 (:) 调用。]rw]

返回动画中的帧数。

**参数**

无。

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `int` | 帧数。 |

**示例**

```lua
local frames = gif:get_frame_count();
gif:set_frame(frames - 2); -- 设置为最后一帧
```